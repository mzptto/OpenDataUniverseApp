digraph OSDU_Master_Data_Hierarchy {
    // Graph settings for clear hierarchical view
    rankdir=TB;
    node [shape=box, style=filled, fontname="Helvetica", fontsize=10];
    edge [fontname="Helvetica", fontsize=8];
    
    // Define ranks for proper hierarchy
    {rank=same; Organisation}
    {rank=same; Field}
    {rank=same; Well}
    {rank=same; Wellbore}
    
    // Compact Legend
    subgraph cluster_legend {
        label="Legend";
        style=filled;
        color=lightgrey;
        fontsize=12;
        
        legend_master [label="Master Data", fillcolor="#ffa080", width=1.2, height=0.4];
        legend_wpc [label="Work Product", fillcolor="#f9d949", width=1.2, height=0.4];
        legend_dataset [label="Dataset", fillcolor="#ddddff", width=1.2, height=0.4];
        
        {rank=same; legend_master; legend_wpc; legend_dataset;}
    }
    
    // Level 1: Organisation (Top of hierarchy)
    Organisation [label="Organisation\n(Field Operator)\n\n• Owns/operates assets\n• Provides technical assurance\n• Manages licenses", fillcolor="#ffa080", width=2.5];
    
    // Level 2: Field (Asset level)
    Field [label="Field\n(Oil/Gas Field)\n\n• Physical asset boundary\n• Contains multiple wells\n• Has seismic surveys", fillcolor="#ffa080", width=2.5];
    
    // Level 3: Well (Drilling location)
    Well [label="Well\n(Drilling Location)\n\n• Surface location\n• Multiple wellbores\n• Activities & licenses", fillcolor="#ffa080", width=2.5];
    
    // Level 4: Wellbore (Actual hole)
    Wellbore [label="Wellbore\n(Drilled Hole)\n\n• 3D trajectory\n• Downhole data\n• Geological markers", fillcolor="#ffa080", width=2.5];
    
    // Field-level data (positioned left)
    subgraph cluster_field_data {
        label="Field-Level Data";
        style=filled;
        color="#fff2e6";
        
        SeismicTraceData [label="Seismic\nTrace Data\n\n• Raw seismic\n• Processed volumes\n• Survey geometry", fillcolor="#f9d949"];
        SeismicHorizon [label="Seismic\nHorizon\n\n• Interpreted surfaces\n• Time/depth maps\n• Structural features", fillcolor="#f9d949"];
        SeismicBinGrid [label="Seismic\nBin Grid\n\n• Survey layout\n• Acquisition geometry\n• Processing grids", fillcolor="#f9d949"];
    }
    
    // Well-level data (positioned right)
    subgraph cluster_well_data {
        label="Well-Level Data";
        style=filled;
        color="#fff2e6";
        
        WellActivity [label="Well Activity\n\n• Drilling operations\n• Completion work\n• Workover activities", fillcolor="#ffa080"];
        WellLicense [label="Well License\n\n• Drilling permits\n• Operating licenses\n• Regulatory compliance", fillcolor="#ffa080"];
    }
    
    // Wellbore-level data (positioned bottom)
    subgraph cluster_wellbore_data {
        label="Wellbore-Level Data";
        style=filled;
        color="#fff2e6";
        
        WellboreTrajectory [label="Wellbore\nTrajectory\n\n• 3D path\n• Survey points\n• Directional data", fillcolor="#f9d949"];
        WellLog [label="Well Log\n\n• Downhole measurements\n• Petrophysical data\n• Formation evaluation", fillcolor="#f9d949"];
        WellboreMarkerSet [label="Wellbore\nMarker Set\n\n• Geological markers\n• Formation tops\n• Stratigraphic picks", fillcolor="#f9d949"];
        WellboreIntervalSet [label="Wellbore\nInterval Set\n\n• Defined intervals\n• Completion zones\n• Production intervals", fillcolor="#f9d949"];
    }
    
    // File storage layer
    subgraph cluster_files {
        label="Dataset Storage";
        style=filled;
        color="#f0f8ff";
        
        SeismicFiles [label="Seismic Files\n\n• SEG-Y format\n• HDF5 volumes\n• Binary grids", fillcolor="#ddddff"];
        WellDataFiles [label="Well Data Files\n\n• EML/WITSML\n• LAS files\n• Generic formats", fillcolor="#ddddff"];
        TrajectoryFiles [label="Trajectory Files\n\n• EML trajectory\n• Survey data\n• Directional files", fillcolor="#ddddff"];
    }
    
    // PRIMARY HIERARCHY (thick red arrows)
    Organisation -> Field [label="owns/operates", color=red, penwidth=4, fontcolor=red];
    Field -> Well [label="contains", color=red, penwidth=4, fontcolor=red];
    Well -> Wellbore [label="contains", color=red, penwidth=4, fontcolor=red];
    
    // DATA ATTACHMENT RELATIONSHIPS (blue arrows)
    Field -> SeismicTraceData [label="has", color=blue, penwidth=2];
    Field -> SeismicHorizon [label="has", color=blue, penwidth=2];
    Field -> SeismicBinGrid [label="has", color=blue, penwidth=2];
    
    Well -> WellActivity [label="has", color=blue, penwidth=2];
    Well -> WellLicense [label="has", color=blue, penwidth=2];
    
    Wellbore -> WellboreTrajectory [label="has", color=blue, penwidth=2];
    Wellbore -> WellLog [label="has", color=blue, penwidth=2];
    Wellbore -> WellboreMarkerSet [label="has", color=blue, penwidth=2];
    Wellbore -> WellboreIntervalSet [label="has", color=blue, penwidth=2];
    
    // FILE STORAGE RELATIONSHIPS (green dashed arrows)
    SeismicTraceData -> SeismicFiles [label="stored in", color=green, style=dashed, penwidth=2];
    SeismicHorizon -> SeismicFiles [label="stored in", color=green, style=dashed, penwidth=2];
    SeismicBinGrid -> SeismicFiles [label="stored in", color=green, style=dashed, penwidth=2];
    
    WellLog -> WellDataFiles [label="stored in", color=green, style=dashed, penwidth=2];
    WellActivity -> WellDataFiles [label="stored in", color=green, style=dashed, penwidth=2];
    WellLicense -> WellDataFiles [label="stored in", color=green, style=dashed, penwidth=2];
    
    WellboreTrajectory -> TrajectoryFiles [label="stored in", color=green, style=dashed, penwidth=2];
    WellboreMarkerSet -> TrajectoryFiles [label="stored in", color=green, style=dashed, penwidth=2];
    WellboreIntervalSet -> TrajectoryFiles [label="stored in", color=green, style=dashed, penwidth=2];
    
    // OPERATIONAL RELATIONSHIPS (gray dotted - cross-cutting)
    Organisation -> Well [label="operates", style=dotted, color=gray];
    Organisation -> Wellbore [label="operates", style=dotted, color=gray];
    
    // GEO-CONTEXT RELATIONSHIPS (purple dotted)
    Field -> Wellbore [label="geo context", style=dotted, color=purple];
}